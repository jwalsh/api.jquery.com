<script>
	{
		"title": ".andSelf()",
		"excerpt": "Add the previous set of elements on the stack to the current set.",
		"termSlugs": {
			"category": [
				"traversing/miscellaneous-traversal","version/1.2"
			]
		}
	}
</script><div id="andSelf1" class="entry method">
<h2 class="jq-clearfix roundTop section-title">
<span class="name">.andSelf()</span> <span class="returns">Returns: <a class="return" href="http://api.jquery.com/Types/#jQuery">jQuery</a></span>
</h2>
<div class="jq-box roundBottom entry-details">
<p class="desc"><strong>Description: </strong>Add the previous set of elements on the stack to the current set.</p>
<ul class="signatures"><li class="signature" id="andSelf"><h4 class="name">
<span class="versionAdded">version added: <a href="/category/version/1.2/">1.2</a></span>.andSelf()</h4></li></ul>
<div class="longdesc">
<p>As described in the discussion for <code><a href="http://api.jquery.com/end/">.end()</a></code>, jQuery objects maintain aninternal stack that keeps track of changes to the matched set of elements. When one of the DOM traversal methods is called, the new set of elements is pushed onto the stack. If the previous set of elements is desired as well, <code>.andSelf()</code> can help.</p>
<p>Consider a page with a simple list on it:</p>
<div class="highlightblock"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
   <span class="nt">&lt;li&gt;</span>list item 1<span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li&gt;</span>list item 2<span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"third-item"</span><span class="nt">&gt;</span>list item 3<span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li&gt;</span>list item 4<span class="nt">&lt;/li&gt;</span>
   <span class="nt">&lt;li&gt;</span>list item 5<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>The result of the following code is a red background behind items 3, 4 and 5:</p>
<div class="highlightblock"><div class="highlight"><pre>$<span class="p">(</span><span class="s">'li.third-item'</span><span class="p">).</span><span class="n">nextAll</span><span class="p">().</span><span class="n">andSelf</span><span class="p">()</span>
  <span class="p">.</span><span class="n">css</span><span class="p">(</span><span class="s">'background-color'</span><span class="p">,</span> <span class="s">'red'</span><span class="p">);</span>
</pre></div>
</div>
<p>First, the initial selector locates item 3, initializing the stack with the set containing just this item. The call to <code>.nextAll()</code> then pushes the set of items 4 and 5 onto the stack. Finally, the <code>.andSelf()</code> invocation merges these two sets together, creating a jQuery object that points to all three items in document order: <code>{[&lt;li.third-item&gt;,&lt;li&gt;,&lt;li&gt; ]}</code>.</p>
</div>
<h3>Example:</h3>
<div class="entry-examples" id="entry-examples"><div id="example-0">
<h4><span class="desc">Find all divs, and all the paragraphs inside of them, and give them both class names.  Notice the div doesn't have the yellow background color since it didn't use .andSelf().</span></h4>
<div class="highlightblock"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
  <span class="nt">&lt;style&gt;</span>
  p, div { margin:5px; padding:5px; }
  .border { border: 2px solid red; }
  .background { background:yellow; }
  <span class="nt">&lt;/style&gt;</span>
  <span class="nt">&lt;script</span> <span class="na">src=</span><span class="s">"http://code.jquery.com/jquery-latest.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
  <span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;p&gt;</span>First Paragraph<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>Second Paragraph<span class="nt">&lt;/p&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;script&gt;</span>
    $("div").find("p").andSelf().addClass("border");
    $("div").find("p").addClass("background");

<span class="nt">&lt;/script&gt;</span>

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<h4>Demo:</h4>
<div class="demo code-demo"></div>
</div></div>
</div>
</div>